<!DOCTYPE html>
<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.min.js"></script>
  <style>
    * {
      margin: 0;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<script>
  const depth = 13;
  let white;
  let cls;

  function setup() {
    createCanvas(innerWidth, innerHeight);
    background(255);
    white = color(255, 255, 255);
    cls = [color(255, 0, 0),
    color(0, 0, 255),
    color(255, 255, 0),
      white, white, white, white, white, white, white, white];

    noFill(255);
    stroke(0);
    strokeWeight(20 / depth);
    rectMode(CORNERS);
    drawRect(20, 20, width - 20, height - 20, depth);
    noLoop();
  }

  function mousePressed() {
    saveCanvas();
  }


  function drawRect(x, y, o, p, d) {
    if (!d) {
      fill(cls[random(0, cls.length) | 0]);
      rect(x, y, o, p);
      return;
    } 
    if (random() < 0.5) {
      // Split vertical
      const dd = 0.2 * (p - y);
      const yy = random(y + dd, p - dd);
      drawRect(x, y, o, yy, d - 1);
      drawRect(x, yy, o, p, d - 1);
    } else {
      const dd = 0.1 * (o - x);
      const xx = random(x + dd, o - dd);
      drawRect(x, y, xx, p, d - 1);
      drawRect(xx, y, o, p, d - 1);
    }
  }

</script>

<body>
</body>

</html>
